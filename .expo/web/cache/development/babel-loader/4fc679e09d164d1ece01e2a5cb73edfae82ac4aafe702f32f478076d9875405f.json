{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport * as MediaLibrary from 'expo-media-library';\nimport { captureRef } from 'react-native-view-shot';\nimport { useEffect } from \"react\";\nfunction useSaveFile(sketchRef, setGrid) {\n  var _MediaLibrary$usePerm = MediaLibrary.usePermissions(),\n    _MediaLibrary$usePerm2 = _slicedToArray(_MediaLibrary$usePerm, 2),\n    status = _MediaLibrary$usePerm2[0],\n    requestPermission = _MediaLibrary$usePerm2[1];\n  useEffect(function () {\n    if (status === null) {\n      requestPermission();\n    }\n  }, [status]);\n  var onSaveImageAsync = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var localUri = yield captureRef(sketchRef, {\n          height: 440,\n          quality: 1\n        });\n        yield MediaLibrary.saveToLibraryAsync(localUri);\n        if (localUri) {\n          setGrid(false);\n          if (Platform.OS == 'android') {\n            ToastAndroid.show(\"Se ha guardado exitosamente\", ToastAndroid.LONG);\n          }\n          if (Platform.OS == 'ios') {\n            alert(\"Se ha guardado exitosamente\");\n          }\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    });\n    return function onSaveImageAsync() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return {\n    onSaveImageAsync: onSaveImageAsync\n  };\n}\nexport { useSaveFile };","map":{"version":3,"names":["MediaLibrary","captureRef","useEffect","useSaveFile","sketchRef","setGrid","_MediaLibrary$usePerm","usePermissions","_MediaLibrary$usePerm2","_slicedToArray","status","requestPermission","onSaveImageAsync","_ref","_asyncToGenerator","localUri","height","quality","saveToLibraryAsync","Platform","OS","ToastAndroid","show","LONG","alert","e","console","log","apply","arguments"],"sources":["C:/Users/Jorge/Escritorio/repositorios/diagramsApp/hooks/useSaveFile.js"],"sourcesContent":["import { ToastAndroid } from \"react-native\";\r\nimport * as MediaLibrary from 'expo-media-library';\r\nimport { captureRef } from 'react-native-view-shot';\r\nimport { useEffect } from \"react\";\r\n\r\nfunction useSaveFile(sketchRef, setGrid) {\r\n    const [status, requestPermission] = MediaLibrary.usePermissions();\r\n\r\n    useEffect(() => {\r\n        if (status === null) {\r\n            requestPermission();\r\n        }\r\n    }, [status]);\r\n    \r\n    const onSaveImageAsync = async () => {\r\n        try {\r\n            const localUri = await captureRef(sketchRef, {\r\n                height: 440,\r\n                quality: 1,\r\n            });\r\n            await MediaLibrary.saveToLibraryAsync(localUri);\r\n            if (localUri) {\r\n                setGrid(false)\r\n                if (Platform.OS == 'android') {\r\n                    ToastAndroid.show(\"Se ha guardado exitosamente\", ToastAndroid.LONG)\r\n                }\r\n                if (Platform.OS == 'ios') {\r\n                    alert(\"Se ha guardado exitosamente\");\r\n                }\r\n\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n    return {\r\n        onSaveImageAsync\r\n    }\r\n}\r\n\r\nexport { useSaveFile };"],"mappings":";;;AACA,OAAO,KAAKA,YAAY,MAAM,oBAAoB;AAClD,SAASC,UAAU,QAAQ,wBAAwB;AACnD,SAASC,SAAS,QAAQ,OAAO;AAEjC,SAASC,WAAWA,CAACC,SAAS,EAAEC,OAAO,EAAE;EACrC,IAAAC,qBAAA,GAAoCN,YAAY,CAACO,cAAc,EAAE;IAAAC,sBAAA,GAAAC,cAAA,CAAAH,qBAAA;IAA1DI,MAAM,GAAAF,sBAAA;IAAEG,iBAAiB,GAAAH,sBAAA;EAEhCN,SAAS,CAAC,YAAM;IACZ,IAAIQ,MAAM,KAAK,IAAI,EAAE;MACjBC,iBAAiB,EAAE;IACvB;EACJ,CAAC,EAAE,CAACD,MAAM,CAAC,CAAC;EAEZ,IAAME,gBAAgB;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MACjC,IAAI;QACA,IAAMC,QAAQ,SAASd,UAAU,CAACG,SAAS,EAAE;UACzCY,MAAM,EAAE,GAAG;UACXC,OAAO,EAAE;QACb,CAAC,CAAC;QACF,MAAMjB,YAAY,CAACkB,kBAAkB,CAACH,QAAQ,CAAC;QAC/C,IAAIA,QAAQ,EAAE;UACVV,OAAO,CAAC,KAAK,CAAC;UACd,IAAIc,QAAQ,CAACC,EAAE,IAAI,SAAS,EAAE;YAC1BC,YAAY,CAACC,IAAI,CAAC,6BAA6B,EAAED,YAAY,CAACE,IAAI,CAAC;UACvE;UACA,IAAIJ,QAAQ,CAACC,EAAE,IAAI,KAAK,EAAE;YACtBI,KAAK,CAAC,6BAA6B,CAAC;UACxC;QAEJ;MACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;MAClB;IACJ,CAAC;IAAA,gBApBKb,gBAAgBA,CAAA;MAAA,OAAAC,IAAA,CAAAe,KAAA,OAAAC,SAAA;IAAA;EAAA,GAoBrB;EACD,OAAO;IACHjB,gBAAgB,EAAhBA;EACJ,CAAC;AACL;AAEA,SAAST,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}