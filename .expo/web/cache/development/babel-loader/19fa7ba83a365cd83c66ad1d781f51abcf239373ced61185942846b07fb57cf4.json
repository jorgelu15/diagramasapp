{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useContext, useState } from \"react\";\nimport templateContext from \"../context/template/templateContext\";\nfunction useMoveText(widthSk, heightSk, sizeSquare, scaleRatio, statusMove, setStatusMove) {\n  var _useContext = useContext(templateContext),\n    coordXY = _useContext.coordXY,\n    coordXYT = _useContext.coordXYT,\n    setcoordXY = _useContext.setcoordXY,\n    setcoordXYT = _useContext.setcoordXYT;\n  var _useState = useState({\n      x: 0,\n      y: 0\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    shiftXY = _useState2[0],\n    setShiftXY = _useState2[1];\n  var handleTouchDownText = function handleTouchDownText(e, idx) {\n    var _e$nativeEvent = e.nativeEvent,\n      pageX = _e$nativeEvent.pageX,\n      pageY = _e$nativeEvent.pageY;\n    var coordXYSelected = coordXY == null ? void 0 : coordXY.map(function (item) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        isSelected: false\n      });\n    });\n    setcoordXY(coordXYSelected);\n    setShiftXY(_objectSpread(_objectSpread({}, setShiftXY), {}, {\n      y: pageY,\n      x: pageX\n    }));\n    setStatusMove(0);\n  };\n  var handleTouchMoveText = function handleTouchMoveText(e, idx) {\n    if (statusMove == 0) {\n      var x_ = Math.round(e.nativeEvent.pageX) - Math.round(shiftXY.x),\n        y_ = Math.round(e.nativeEvent.pageY) - Math.round(shiftXY.y);\n      var mx = x_ / scaleRatio,\n        my = y_ / scaleRatio;\n      var updatedX = parseInt(coordXYT[idx].x) + mx;\n      var updatedY = parseInt(coordXYT[idx].y) + my;\n      if (updatedX < 0 || updatedX + sizeSquare * 2 > widthSk) {\n        updatedX = coordXYT[idx].x;\n      }\n      if (updatedY < 0 || updatedY + sizeSquare * 2 > heightSk) {\n        updatedY = coordXYT[idx].y;\n      }\n      var updatedCoordXYT = _toConsumableArray(coordXYT);\n      updatedCoordXYT[idx] = _objectSpread(_objectSpread({}, coordXYT[idx]), {}, {\n        x: updatedX,\n        y: updatedY\n      });\n      setcoordXYT(updatedCoordXYT);\n      setShiftXY(_objectSpread(_objectSpread({}, setShiftXY), {}, {\n        y: e.nativeEvent.pageY,\n        x: e.nativeEvent.pageX\n      }));\n    }\n  };\n  var handleTouchUpText = function handleTouchUpText(e, idx) {\n    var updatedCoordXYT = coordXYT.map(function (item, indx) {\n      return idx === indx ? _objectSpread(_objectSpread({}, item), {}, {\n        isSelected: true\n      }) : item;\n    });\n    setcoordXYT(updatedCoordXYT);\n    var updatedCoordXY = coordXY.map(function (item, indx) {\n      return true ? _objectSpread(_objectSpread({}, item), {}, {\n        isSelected: false\n      }) : item;\n    });\n    setcoordXY(updatedCoordXY);\n    setStatusMove(1);\n  };\n  return {\n    handleTouchDownText: handleTouchDownText,\n    handleTouchMoveText: handleTouchMoveText,\n    handleTouchUpText: handleTouchUpText\n  };\n}\nexport { useMoveText };","map":{"version":3,"names":["useContext","useState","templateContext","useMoveText","widthSk","heightSk","sizeSquare","scaleRatio","statusMove","setStatusMove","_useContext","coordXY","coordXYT","setcoordXY","setcoordXYT","_useState","x","y","_useState2","_slicedToArray","shiftXY","setShiftXY","handleTouchDownText","e","idx","_e$nativeEvent","nativeEvent","pageX","pageY","coordXYSelected","map","item","_objectSpread","isSelected","handleTouchMoveText","x_","Math","round","y_","mx","my","updatedX","parseInt","updatedY","updatedCoordXYT","_toConsumableArray","handleTouchUpText","indx","updatedCoordXY"],"sources":["C:/Users/Jorge/Escritorio/repositorios/diagramsApp/hooks/useMoveText.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport templateContext from \"../context/template/templateContext\";\r\n\r\nfunction useMoveText(widthSk, heightSk, sizeSquare, scaleRatio, statusMove, setStatusMove) {\r\n    const { coordXY, coordXYT, setcoordXY, setcoordXYT } = useContext(templateContext);\r\n    const [shiftXY, setShiftXY] = useState({ x: 0, y: 0 });\r\n\r\n    const handleTouchDownText = (e, idx) => {\r\n        const { pageX, pageY } = e.nativeEvent;\r\n\r\n        const coordXYSelected = coordXY?.map((item) =>\r\n            ({ ...item, isSelected: false })\r\n        );\r\n        setcoordXY(coordXYSelected);\r\n\r\n        setShiftXY({\r\n            ...setShiftXY,\r\n            y: pageY,\r\n            x: pageX,\r\n        });\r\n\r\n        setStatusMove(0); //estado del movimiento\r\n    };\r\n\r\n    const handleTouchMoveText = (e, idx) => {\r\n\r\n        if (statusMove == 0) {\r\n\r\n            //genera un movimiento lento, hace que el cuadro persiga al mouse\r\n            let x_ = Math.round(e.nativeEvent.pageX) - Math.round(shiftXY.x),\r\n                y_ = Math.round(e.nativeEvent.pageY) - Math.round(shiftXY.y); //posicion mouse actual - posicion mouse pasada\r\n\r\n            //movimiento del mouse en (x,y) con respecto a la escala\r\n            let mx = x_ / scaleRatio, my = y_ / scaleRatio;\r\n\r\n            let updatedX = parseInt(coordXYT[idx].x) + mx;\r\n            let updatedY = parseInt(coordXYT[idx].y) + my;\r\n\r\n            // colision cuadro a paredes\r\n            // si las coords en (x,y) son menores que 0 entonces el movimiento retorna (0,0) => (x,y)\r\n            if (updatedX < 0 || updatedX + sizeSquare * 2 > widthSk) {\r\n                updatedX = coordXYT[idx].x; // Mantener la misma posici贸n en x si hay colisi贸n con las paredes\r\n            }\r\n\r\n            if (updatedY < 0 || updatedY + sizeSquare * 2 > heightSk) {\r\n                updatedY = coordXYT[idx].y; // Mantener la misma posici贸n en y si hay colisi贸n con las paredes\r\n            }\r\n\r\n            //optimizacion de el movimiento de los componentes en el sketch\r\n            const updatedCoordXYT = [...coordXYT];\r\n            updatedCoordXYT[idx] = { ...coordXYT[idx], x: updatedX, y: updatedY };\r\n            setcoordXYT(updatedCoordXYT);\r\n\r\n            //se setea la posicion actual y pasa a ser la pasada\r\n            setShiftXY({\r\n                ...setShiftXY,\r\n                y: e.nativeEvent.pageY,\r\n                x: e.nativeEvent.pageX,\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleTouchUpText = (e, idx) => {\r\n\r\n        const updatedCoordXYT = coordXYT.map((item, indx) =>\r\n            idx === indx ? { ...item, isSelected: true } : item\r\n        );\r\n        setcoordXYT(updatedCoordXYT);\r\n\r\n        const updatedCoordXY = coordXY.map((item, indx) =>\r\n            true ? {...item, isSelected: false} : item\r\n        );\r\n        setcoordXY(updatedCoordXY);\r\n\r\n        //estado del movimiento\r\n        setStatusMove(1);\r\n    };\r\n\r\n    return {\r\n        handleTouchDownText,\r\n        handleTouchMoveText,\r\n        handleTouchUpText\r\n    }\r\n}\r\n\r\nexport { useMoveText };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}